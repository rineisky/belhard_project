# REST api

**API** (application programming interface) — описание способов
(набор классов, процедур, функций, структур или констант), которыми одна
компьютерная программа может взаимодействовать с другой программой.

**Web API** — содержит, как правило, определённый набор HTTP-запросов, а также
определение структуры HTTP-ответов, для выражения которых используют XML−
или JSON−формат.


**REST** (Representational State Transfer — «передача состояния представления») —
архитектурный стиль взаимодействия компонентов распределённого приложения в сети.
REST представляет собой согласованный набор ограничений, учитываемых при проектировании
распределённой гипермедиа-системы. В определённых случаях (интернет-магазины, поисковые
системы, прочие системы, основанные на данных) это приводит к повышению
производительности и упрощению архитектуры.

**REST** - рекомендации, как надо выстраивать HTTP api, чтобы они были легки в
использовании и поддержке на протяжении долгого времени.

## Требования к REST

1. Модель клиент-сервер
2. Отсутствие состояния
3. Кеширование
4. Единообразие интерфейса
5. Слои
6. Код по требованию (необязательное требование)

Для веб-служб, построенных с учётом REST (то есть не нарушающих накладываемых им
ограничений), применяют термин «RESTful».

## Запросы HTTP

| Метод   | Описание                                                                                                                                                                                                                                                |
| ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| OPTIONS | Используется для определения возможностей веб-сервера или параметров соединения для конкретного ресурса.                                                                                                                                                |
| GET     | Используется для запроса содержимого указанного ресурса.                                                                                                                                                                                                |
| HEAD    | Аналогичен методу GET, за исключением того, что в ответе сервера отсутствует тело. Запрос HEAD обычно применяется для извлечения метаданных, проверки наличия ресурса (валидация URL) и чтобы узнать, не изменился ли он с момента последнего обращения.|
| POST    | Применяется для передачи пользовательских данных заданному ресурсу.                                                                                                                                                                                     |
| PUT     | Применяется для загрузки содержимого запроса на указанный в запросе URI.                                                                                                                                                                                |
| PATCH   | Аналогично PUT, но применяется только к фрагменту ресурса.                                                                                                                                                                                              |
| DELETE  | Удаляет указанный ресурс.                                                                                                                                                                                                                               |
| TRACE   | Возвращает полученный запрос так, что клиент может увидеть, какую информацию промежуточные серверы добавляют или изменяют в запросе.                                                                                                                    |
| CONNECT | Преобразует соединение запроса в прозрачный TCP/IP-туннель, обычно чтобы содействовать установлению защищённого SSL-соединения через нешифрованный прокси.                                                                                               |

Метод считается «**идемпотентным**», если эффект на сервер от одного запроса такой же
как от нескольких идентичных запросов такого типа. Из методов запроса, определенных
в этой спецификации, PUT, DELETE и безопасные методы (не изменяют состояние сервера)
запросов являются идемпотентными.

Другими словами если многократное повторение одних и тех же запросов возвращает
одинаковые результаты, то метод считается идемпотентным.

| Метод | Безопасный | Идемпотентный |
| ----- | ---------- | ------------- |
|OPTIONS|Да          |Да             |
|GET    |Да          |Да             |
|HEAD   |Да          |Да             |
|POST   |Нет         |Нет            |
|PUT    |Нет         |Да             |
|PATCH  |Нет         |Да             |
|DELETE |Нет         |Да             |
|TRACE  |Да          |Да             |
|CONNECT|Нет         |Нет            |

## Запросы HTTP и REST

| HTTP метод | CRUD                                   | Вся коллекция (напр. `/users`)                                                                                                                                                                                                                         | Конкретный объект (напр. `/users/1`)                                                                                                                     |
| ---------- | -------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| GET        | Просмотр                               | `200 (OK)`, список всех пользователей. Можно использовать пагинацию, сортировку и фильтрацию для навигации по большим коллекциям (для этого используются параметры GET запроса). `404 (Not found)`, если такой коллекции нет.                          | 200 (OK) Конкретный пользователь. 404 (Not found), если ID не найден или некорректен.                                                                    |
| POST       | Создание                               | `201 (Created)`, ‘Location’ заголовок с ссылкой на созданный конкретный объект (`/USERS/{id}`). `404 (Not found)`, если такой коллекции нет.                                                                                                           | Нужно избегать использования POST для конкретного объекта.                                                                                               |
| PUT        | Редактирование / замена                | `200 (OK)` при успешном обновлении. `204 (No Content)`, если обновление не произошло, так как нет новых данных. `404 (Not found)`, если такой коллекции нет. `405 (Method not allowed)`, если мы не представляем возможность редактирования коллекции. | 200 (OK) при успешном обновлении. 204 (No Content) если обновление не произошло, так как нет новых данных. 404 (Not found) если такого пользователя нет. |
| PATCH      | Частичное редактирование / модификация | Как и в `PUT`.                                                                                                                                                                                                                                         | Как и в `PUT`.                                                                                                                                           |
| DELETE     | Удаление                               | `200 (OK)` при успешном удалении. `404 (Not found)`, если такой коллекции нет. `405 (Method not allowed)`, если мы не представляем возможность удаления коллекции.                                                                                     | 200 (OK) при успешном удалении. 404 (Not found) если такого пользователя нет.                                                                            |
